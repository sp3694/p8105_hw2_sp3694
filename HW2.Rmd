---
title: "HW3"
author: "Stephen Powers"
date: "9/26/2019"
output: github_document
---


```{r setup, include = FALSE}
  knitr::opts_chunk$set(echo = TRUE)
```

## Problem 1

```{r }
library(readxl)
library(tidyverse)
```

### Importing and Cleaning Data

### *TrashWheel Data*

```{r}
TrashWheel = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                        sheet = 1) %>%
  janitor::clean_names() %>%
  drop_na (dumpster) %>%
  mutate(sports_balls = as.integer(sports_balls))
```

### *2017 Precipitation Data* 


```{r}
Precipitation_2017 =
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                        sheet = "2017 Precipitation", skip = 1) %>%
  janitor::clean_names() %>%
  drop_na(total) %>%
  mutate(year = "2017")
```

### *2018 Precipitation Data* 


```{r}
Precipitation_2018 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                        sheet = "2018 Precipitation", skip = 1) %>%
  janitor::clean_names() %>%
  drop_na(total) %>%
  mutate(year = "2018")
```

### *Combining Precipitation Data* 

```{r}
Precipitation_2017_2018 = 
  bind_rows(Precipitation_2017, Precipitation_2018) %>%
  mutate(month = month.name[month]) %>%
  select(year, month, total)
```

There are `r nrow(TrashWheel)` observations in the Mr. Trash Wheel dataset, and there here are `r nrow(Precipitation_2017_2018)` observations in the combined precipitation dataset. Key variables in the Mr. Trash Wheel data set includes the following: `r colnames(TrashWheel)`. Key variables in the combined precipitation data set includes the following: `r colnames(Precipitation_2017_2018)`. The total precipitation in 2018 was `r sum(pull(Precipitation_2018,total))`. The median number of sports balls in a dumpster in 2017 was `r TrashWheel %>% filter(year == 2017) %>% summarize(median(sports_balls))`.


## Problem 2

### *Pols-Month Data* 

```{r}
pols =
  read_csv("./data/pols-month.csv") %>%
  separate(mon, c("year", "month", "day")) %>%
  mutate(
    year = as.numeric(year),
    month = as.numeric(month),
    month = month.name[month],
    president = 
      ifelse((prez_gop == 1 & prez_dem == 0), "gop",
                       ifelse((prez_dem == 1 & prez_gop == 0), "dem", NA))) %>%
    select(-prez_gop, -prez_dem, -day)
```

### *SNP Data* 

```{r}
snp =
  read_csv("./data/snp.csv") %>%
  separate(date, c("month", "day", "year")) %>%
  mutate(
    year = as.numeric(year),
    monthnumber = as.numeric(month),
    month = month.name[monthnumber]) %>%
  arrange(year, monthnumber) %>%
  select(year, month, close, -day, -monthnumber)
```

### *Unemployment Data* 

```{r}
unemployment = read_csv("./data/unemployment.csv") %>%
  pivot_longer(Jan:Dec,
    names_to = "month",
    values_to = "rate") %>%
  janitor::clean_names() %>%
  mutate(month = month.name[match(month, month.abb)])
```

### *Merging Pols, SNP, and Unemployment Data* 

```{r}
pols_snp_unemp = pols %>%
  left_join(snp, by = c("year", "month")) %>%
  left_join(unemployment, by = c("year", "month"))
```

There are `r nrow(pols_snp_unemp)` observations, and there are `r ncol(pols_snp_unemp)` columns. 
## Problem 3


### *Popular Baby Names Data* 

```{r}
popular_baby_names = read_csv("./data/Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  mutate(ethnicity = recode(ethnicity, "WHITE NON HISP" = "WHITE NON HISPANIC",
                            "BLACK NON HISP" = "BLACK NON HISPANIC",
                            "ASIAN AND PACI" = "ASIAN AND PACIFIC ISLANDER")) %>% 
  mutate(childs_first_name = str_to_lower(childs_first_name),
         ethnicity = str_to_lower(ethnicity),
         gender = str_to_lower(gender)) %>% 
  distinct()
```

### *Popularity of Name "Olivia" Table* 

```{r}

```



